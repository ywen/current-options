(this.webpackJsonpreactjs=this.webpackJsonpreactjs||[]).push([[0],{158:function(t,e,n){},169:function(t,e){},171:function(t,e){},181:function(t,e){},183:function(t,e){},210:function(t,e){},211:function(t,e){},216:function(t,e){},218:function(t,e){},242:function(t,e){},281:function(t,e,n){},283:function(t,e,n){},295:function(t,e,n){},296:function(t,e,n){},297:function(t,e,n){},298:function(t,e,n){},299:function(t,e,n){},300:function(t,e,n){},301:function(t,e,n){},303:function(t,e,n){},304:function(t,e,n){},305:function(t,e,n){"use strict";n.r(e);var a=n(1),i=n(2),r=n.n(i),c=n(52),o=n.n(c),s=(n(158),n(63)),u=n(8),l=n(10),d=n(28),p=(n(163),{apiKey:"AIzaSyDrCiE6lS3W0FnhegGwpiR-Ger_eqcG_KA",authDomain:"my-options-6eb19.firebaseapp.com",databaseURL:"https://my-options-6eb19.firebaseio.com",projectId:"my-options-6eb19",storageBucket:"my-options-6eb19.appspot.com",messagingSenderId:"980323281230",appId:"1:980323281230:web:6ee11012ba23952f47961f"}),f=function(){d.a.apps.length?d.a.app():d.a.initializeApp(p)},j=function(){return f(),d.a.auth()},b=n(54),O=function(t,e){return void 0!==t&&("OPEN_ADD_MODAL"===e.type||"CLOSE_ADD_MODAL"!==e.type&&t)},m=n(46),h=n(14),v=h.a.fromJS({closeModal:!1,position:null,data:{closedDate:(new Date).toLocaleString()}}),_=function(t,e){if(void 0===t)return v;if("OPEN_CLOSE_MODAL"===e.type)return t.merge({isOpen:!0,position:e.position});if("CLOSE_CLOSE_MODAL"===e.type)return v;if("CLOSE_POSITION_VALUE_CHANGED"===e.type){var n=t.get("data").merge(Object(m.a)({},e.key,e.value));return t.merge({data:n})}return t},x=function(t){var e=t.original,n=e,a=e.get("quantity"),i=e.get("purchasePrice"),r=e.get("symbol").match(/-([A-Z]+)+([0-9^.]+)([P|C])([0-9,.]+)/);if(r&&(n=(n=(n=(n=n.set("stockSymbol",r[1])).set("expirationDate",r[2])).set("optionType",r[3])).set("strike",r[4]),a)){n=n.set("moneyOccupied",Math.abs(r[4]*a*100));var c=Number(a)<0;i&&c&&(n=(n=n.set("potentialGain",Math.abs(100*i*a))).set("potentialLose","unlimited")),i&&!c&&(n=(n=n.set("potentialGain","unlimited")).set("potentialLose",100*i))}return n},g=h.a.fromJS({openDate:(new Date).toLocaleString()}),y=function(t,e){if(void 0===t)return g;if("ADD_POSITION_VALUE_CHANGED"===e.type){var n=t.set(e.key,e.value);return n=x({original:n})}return"ADD_POSITION_CLEAR_FORM_DATA"===e.type?g:t},N=h.a.fromJS({}),k=function(t,e){if(void 0===t)return N;if("SIGN_UP_VALUE_CHANGED"===e.type){var n=e.key,a=e.value;return t.set(n,a)}return t},D=h.a.fromJS({}),S=function(t,e){if(void 0===t)return D;if("SIGN_IN_VALUE_CHANGED"===e.type){var n=e.key,a=e.value;return t.set(n,a)}return t},A=n(35),C=n.n(A),w=function(t){var e=t.key,n=t.value;return C.a.AES.decrypt(n,e).toString(C.a.enc.Utf8)},E="my-options-encryption-key",P={save:function(t){var e=t.key;return localStorage.setItem(E,e)},fetch:function(){return localStorage.getItem(E)}},L=function(t){var e=t.positions,n=P.fetch();return e.map((function(t){var e={id:t.id};return Object.keys(t).forEach((function(a){if("id"!==a){var i=w({key:n,value:a});e[i]=w({key:n,value:t[a]})}})),e}))},I=h.a.List([]),F=function(t,e){if(!t)return I;if("POSITION_CHANGED"===e.type){var n=L({positions:e.data}).map((function(t){return x({original:h.a.fromJS(t)})}));return h.a.fromJS(n)}return t},G=function(t,e){return t?"TAB_CHANGED"===e.type?e.link:t:"/list"},T=Object(b.b)({addModalOpen:O,closeModal:_,addPositionFormData:y,currentTab:G,signUpData:k,signInData:S,positions:F}),M=Object(b.c)(T),V=(n(281),n(20)),U=Object(V.a)(),H=function(t){var e=t.dispatch,n=t.link;e({type:"TAB_CHANGED",link:n}),U.push(n)},J=Object(u.b)((function(t){return{}}))((function(t){var e=t.isCurrent,n=t.dispatch,i=t.name,r=t.link,c=e?"tab__link--current":"tab__link";return Object(a.jsx)("li",{className:"tab__link ".concat(c),onClick:function(){return H({link:r,dispatch:n})},children:i})})),q=Object(u.b)((function(t){return{currentTab:t.currentTab}}))((function(t){var e=t.currentTab;t.dispatch;return Object(a.jsxs)("ul",{className:"tab__container",children:[Object(a.jsx)(J,{isCurrent:"/list"===e,name:"List View",link:"/list"},"list"),Object(a.jsx)(J,{isCurrent:"/expiration"===e,name:"Expiration View",link:"/expiration"},"expiration")]})})),R=n(17),B=n.n(R),K=n(27),W=(n(283),function(t){return(0,t.dispatch)({type:"OPEN_ADD_MODAL"})}),z=n(307),Z=function(t){var e=t.key,n=t.value;return C.a.AES.encrypt(n,e).toString()},$=function(t){var e=t.data,n=t.fields,a={},i=P.fetch();return n.forEach((function(t){var n=e.get(t),r=Z({key:i,value:n}),c=Z({key:i,value:t});a[c]=r})),a},Q=(n(284),function(){return d.a.firestore()}),X=function(t){var e=t.name;return function(){var t=j().currentUser.uid;return Q().collection(t)}().doc(e)},Y=function(){return X({name:"key "})},tt=function(){return X({name:"openPositions"})},et=function(){var t=Object(K.a)(B.a.mark((function t(e){var n,a;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.doc,a=e.position,t.next=3,n().get();case 3:if(t.sent.exists){t.next=7;break}return t.next=7,n().set({});case 7:return t.next=9,n().update(Object(m.a)({},a.id,a));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),nt=function(){var t=Object(K.a)(B.a.mark((function t(e){var n;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.position,t.next=3,et({doc:tt,position:n});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),at={closePosition:function(){var t=Object(K.a)(B.a.mark((function t(e){var n,a,i,r;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.position,a=Q().batch(),i=tt(),r=X({name:"closedPositions"}),a.update(i,Object(m.a)({},n.get("id"),d.a.firestore.FieldValue.delete())),t.next=7,r.get();case 7:return t.sent.exists||a.set(r,{}),a.update(r,Object(m.a)({},n.get("id"),n.toJS())),t.abrupt("return",a.commit());case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),getKey:function(){return Y().get()},getOpenOptionsFromData:function(t){var e=t.doc.data();if(!e)return[];var n=[];return Object.keys(e).forEach((function(t){n.push(e[t])})),n},openPositionsStore:tt,saveOpenPosition:nt,setKey:function(t){var e=t.key;return Y().set({key:e})}},it={closedFields:["closingPrice","closedDate"],metaFields:["symbol","quantity","purchasePrice","openDate"],inferredFields:["stockSymbol","expirationDate","optionType","strike","moneyOccupied","potentialGain","potentialLose"]},rt=function(t){var e=t.data,n=$({data:e,fields:it.metaFields});n.id=Object(z.a)(),at.saveOpenPosition({position:n})},ct=function(t){var e=t.file;return new Promise((function(t,n){var a=new FileReader;a.onload=function(e){for(var n=e.target.result.split("\r\n").map((function(t){return t.split(",")})),a=[],i=1;i<n.length;i++)if(n[i][0].length>0){var r={symbol:n[i][0],quantity:n[i][1],purchasePrice:n[i][6],openDate:n[i][8]};a.push(r)}t(a)},a.readAsText(e)}))},ot=function(){return j().signOut()},st=Object(u.b)((function(t){return{}}))((function(t){var e=t.dispatch,n=Object(i.useState)(null),r=Object(s.a)(n,2),c=r[0],o=r[1],u=function(){var t=Object(K.a)(B.a.mark((function t(){var e,n;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ct({file:c});case 2:e=t.sent,n=0;case 4:if(!(n<e.length)){t.next=16;break}return t.prev=5,t.next=8,rt({data:h.a.fromJS(e[n])});case 8:t.next=13;break;case 10:t.prev=10,t.t0=t.catch(5),console.error(t.t0);case 13:n++,t.next=4;break;case 16:case"end":return t.stop()}}),t,null,[[5,10]])})));return function(){return t.apply(this,arguments)}}();return Object(a.jsxs)("div",{className:"menu-container",children:[Object(a.jsx)("button",{className:"menu__item menu__addPosition",onClick:function(){return W({dispatch:e})},children:"Add Position"}),Object(a.jsxs)("div",{className:"menu__item",children:[Object(a.jsx)("label",{htmlFor:"upload",children:"Import CSV"}),Object(a.jsx)("input",{type:"file",id:"upload",accept:".csv",onChange:function(t){o(t.target.files[0])},required:!0}),Object(a.jsx)("button",{disabled:!c,onClick:u,children:"Import"})]}),Object(a.jsx)("button",{onClick:ot,className:"menu__item menu__signOut",children:"Sign Out"},"signout")]})})),ut=n(62),lt=n.n(ut),dt=function(t){return(0,t.dispatch)({type:"CLOSE_ADD_MODAL"})},pt=(n(295),function(t){var e=t.name.replace(/([A-Z])/g," $1");return e.replace(/^./,e[0].toUpperCase())}),ft=Object(u.b)((function(t){return{}}))((function(t){var e=t.data,n=t.name,i=t.dispatch,r=t.changeValue,c=t.fieldType,o=void 0===c?"text":c,s=e?e.get(n):"",u="form-input__".concat(n);return Object(a.jsxs)("div",{className:"text-field__container",children:[Object(a.jsx)("label",{className:"text-field__label",htmlFor:u,children:"".concat(pt({name:n}),":")},"".concat(n,"-label")),Object(a.jsx)("input",{id:u,className:"text-field__input text-field__input--".concat(n),type:o,value:s||"",onChange:function(t){r({dispatch:i,key:n,value:t.target.value})}},"".concat(n,"-field"))]})})),jt=(n(296),Object(u.b)((function(t){return{data:t.addPositionFormData}}))((function(t){var e=t.data,n=t.name,i=(t.dispatch,e.get(n));return Object(a.jsxs)("div",{className:"add-position-row__container",children:[Object(a.jsx)("div",{className:"add-position-row__label",children:"".concat(pt({name:n}),":")}),Object(a.jsx)("div",{className:"add-position-row__value",children:i})]})}))),bt=(n(297),function(t){return(0,t.dispatch)({type:"ADD_POSITION_VALUE_CHANGED",value:t.value,key:t.key})}),Ot=function(t){var e=t.data;return it.metaFields.map((function(t){return Object(a.jsx)(ft,{changeValue:bt,data:e,name:t},t)}))},mt=Object(u.b)((function(t){return{addModalOpen:t.addModalOpen,data:t.addPositionFormData}}))((function(t){var e=t.addModalOpen,n=t.dispatch,i=t.data;return Object(a.jsxs)(lt.a,{isOpen:e,shouldCloseOnOverlayClick:!0,ariaHideApp:!1,onRequestClose:function(){return dt({dispatch:n})},overlayClassName:"modal__overlay",children:[Object(a.jsxs)("div",{className:"modal__form",children:[Ot({data:i}),Object(a.jsx)("button",{onClick:function(){rt({data:i})},className:"modal__save",children:"Save"})]}),Object(a.jsx)("div",{className:"modal__information",children:it.metaFields.concat(it.inferredFields).map((function(t){return Object(a.jsx)(jt,{name:t},"row-".concat(t))}))})]})})),ht=function(){var t=Object(K.a)(B.a.mark((function t(e){var n,a,i,r,c;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.position,a=e.closedData,i=$({data:n,fields:it.metaFields}),r=$({data:a,fields:it.closedFields}),c=h.a.fromJS(i).merge(r).merge({id:n.get("id")}),at.closePosition({position:c});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),vt=Object(u.b)((function(t){return{closeModal:t.closeModal,data:t.closePositionFormData}}))((function(t){var e=t.dispatch,n=t.closeModal,i=n.get("isOpen"),r=n.get("position"),c=n.get("data"),o=function(t){return(0,t.dispatch)({type:"CLOSE_POSITION_VALUE_CHANGED",value:t.value,key:t.key})},s=function(){e({type:"CLOSE_CLOSE_MODAL"})};return Object(a.jsx)(lt.a,{isOpen:i,shouldCloseOnOverlayClick:!0,ariaHideApp:!1,onRequestClose:function(){return s()},overlayClassName:"modal__overlay",children:Object(a.jsxs)("div",{className:"modal__form",children:[it.closedFields.map((function(t){return Object(a.jsx)(ft,{changeValue:o,data:c,name:t},t)})),Object(a.jsx)("button",{onClick:function(){s(),ht({position:r,closedData:c})},className:"modal__save",children:"Save"})]})})})),_t=(n(298),function(t){var e=t.position,n=t.dispatch;return Object(a.jsx)("td",{className:"list__td",children:Object(a.jsx)("button",{className:"list__close-button",onClick:function(){return n({type:"OPEN_CLOSE_MODAL",position:e})},children:"Close"})},"close-button-".concat(e.get("id")))}),xt=function(t){var e=t.position,n=t.dispatch;return it.metaFields.concat(it.inferredFields).map((function(t){return Object(a.jsx)("td",{className:"list__td",children:e.get(t)},"td-".concat(t))})).concat([_t({position:e,dispatch:n})])},gt=function(t){var e=t.positions,n=t.dispatch;return 0!==e.size&&e.map((function(t,e){return Object(a.jsx)("tr",{className:"list__tr",children:xt({position:t,dispatch:n})},"position-tr-".concat(e))})).toJS()},yt=Object(u.b)((function(t){return{positions:t.positions}}))((function(t){var e=t.positions,n=t.dispatch;return Object(a.jsx)("div",{className:"list__container",children:Object(a.jsxs)("table",{className:"list__table",children:[Object(a.jsx)("thead",{className:"list__thead",children:Object(a.jsx)("tr",{children:it.metaFields.concat(it.inferredFields).concat(["Actions"]).map((function(t){return Object(a.jsx)("th",{className:"list__th",children:pt({name:t})},"th-".concat(t))}))})}),Object(a.jsx)("tbody",{children:gt({positions:e,dispatch:n})})]})})})),Nt=n(152),kt=function(t){return t.list.reduce((function(t,e){return{totalOccupied:Number(e.get("moneyOccupied"))+t.totalOccupied,totalPotential:Number(e.get("potentialGain"))+t.totalPotential}}),{totalOccupied:0,totalPotential:0})},Dt=function(t){var e=t.dividend,n=t.divisor;return"% ".concat((e/n*100).toFixed(2))},St=Object(Nt.a)((function(t){return t.positions}),(function(t){var e=kt({list:t}),n=e.totalPotential,a=e.totalOccupied;return t.sort((function(t,e){return t.get("expirationDate")>e.get("expirationDate")?1:-1})).groupBy((function(t){return t.get("expirationDate")})).map((function(t,e){var i=kt({list:t}),r=i.totalPotential,c=i.totalOccupied,o=Dt({dividend:r,divisor:n}),s=Dt({dividend:c,divisor:a});return h.a.fromJS({potential:r,occupied:c,potentialPercentage:o,occupiedPercentage:s})}))})),At=(n(299),function(t){var e=t.stat,n=t.name,i=e.get("".concat(n,"Percentage"));return Object(a.jsxs)("div",{className:"expiration-view__row",children:[Object(a.jsx)("div",{className:"expiration-view__stat--label",children:pt({name:n})}),Object(a.jsx)("div",{className:"expiration-view__stat",children:"$ ".concat(e.get(n))}),Object(a.jsx)("div",{className:"expiration-view__percentage",children:i})]})}),Ct=(n(300),function(t){var e=t.stats,n=[];return e.forEach((function(t,e){return n.push(function(t){var e=t.stat,n=t.expirationDate;return Object(a.jsxs)("div",{className:"expiration-view__stat-container",children:[Object(a.jsxs)("div",{className:"expiration-view__header-row",children:[Object(a.jsx)("div",{className:"expiration-view__expiration-date__label",children:"Expiration Date"}),Object(a.jsx)("div",{className:"expiration-view__expiration-date",children:n})]}),Object(a.jsx)(At,{stat:e,name:"potential"},"potential"),Object(a.jsx)(At,{stat:e,name:"occupied"},"occupied")]})}({stat:t,expirationDate:e}))})),n}),wt=Object(u.b)((function(t){return{stats:St(t)}}))((function(t){var e=t.stats;return Object(a.jsx)("div",{className:"expiration-view__container",children:Ct({stats:e})})})),Et=function(t){var e=t.dispatch;at.openPositionsStore().onSnapshot((function(t){var n=at.getOpenOptionsFromData({doc:t});e({type:"POSITION_CHANGED",data:n})}))},Pt=(n(301),Object(u.b)((function(t){return{}}))((function(t){var e=t.user,n=t.dispatch;return Object(i.useEffect)((function(){e&&Et({dispatch:n})}),[e,n]),Object(a.jsxs)("div",{className:"authenticated__main",children:[Object(a.jsx)(st,{},"menu"),Object(a.jsx)(q,{},"tabs"),Object(a.jsx)(mt,{},"addForm"),Object(a.jsx)(vt,{},"closeModal"),Object(a.jsx)(l.b,{path:"/list",children:Object(a.jsx)(yt,{},"list-view")},"list-route"),Object(a.jsx)(l.b,{path:"/expiration",children:Object(a.jsx)(wt,{},"expiration-view")},"expiration-route"),Object(a.jsx)(l.a,{exact:!0,from:"/",to:"/list"})]})}))),Lt=n(45),It=(n(303),function(t){(0,t.dispatch)({type:"SIGN_IN_VALUE_CHANGED",key:t.key,value:t.value})}),Ft=function(){return C.a.lib.WordArray.random(64).toString()},Gt=function(){var t=Object(K.a)(B.a.mark((function t(e){var n,a,i,r,c;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.dispatch,n=e.password,t.next=3,at.getKey();case 3:if(!(a=t.sent).exists){t.next=9;break}i=w({value:a.data().key,key:n}),P.save({key:i}),t.next=14;break;case 9:return r=Ft(),c=Z({key:n,value:r}),t.next=13,at.setKey({key:c});case 13:P.save({key:r});case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Tt=function(t){var e=t.dispatch,n=t.data,a=n.get("email"),i=n.get("password");j().signInWithEmailAndPassword(a,i).then((function(t){Gt({dispatch:e,password:i}),U.push("/")})).catch((function(t){console.error(t)}))},Mt=Object(u.b)((function(t){return{data:t.signInData}}))((function(t){var e=t.dispatch,n=t.data;return Object(a.jsxs)("div",{className:"signin__container",children:[Object(a.jsx)(ft,{changeValue:It,data:n,name:"email"},"symbol"),Object(a.jsx)(ft,{changeValue:It,fieldType:"password",data:n,name:"password"},"password"),Object(a.jsx)("div",{className:"signin__input-container",children:Object(a.jsx)("button",{onClick:function(){return Tt({dispatch:e,data:n})},children:"Sign In"})}),Object(a.jsx)("div",{className:"signin__input-container",children:Object(a.jsx)(Lt.a,{to:"/signup",children:"Sign up"})})]})})),Vt=(n(304),function(t){var e=t.data,n=t.dispatch,a=e.get("email"),i=e.get("password");j().createUserWithEmailAndPassword(a,i).then((function(t){Gt({dispatch:n,password:i}),U.push("/")}))}),Ut=function(t){(0,t.dispatch)({type:"SIGN_UP_VALUE_CHANGED",key:t.key,value:t.value})},Ht=Object(u.b)((function(t){return{data:t.signUpData}}))((function(t){var e=t.dispatch,n=t.data;return[Object(a.jsxs)("div",{className:"signup__container",children:[Object(a.jsx)(ft,{changeValue:Ut,data:n,name:"email"},"symbol"),Object(a.jsx)(ft,{changeValue:Ut,fieldType:"password",data:n,name:"password"},"password"),Object(a.jsx)(ft,{changeValue:Ut,fieldType:"password",data:n,name:"confirmation"},"confirmation")]},"fields-container"),Object(a.jsx)("div",{className:"signup__input-container",children:Object(a.jsx)("button",{onClick:function(){return Vt({dispatch:e,data:n})},children:"Sign Up"})},"submit-button"),Object(a.jsx)("div",{className:"signup__input-container",children:Object(a.jsx)(Lt.a,{to:"/signin",children:"Sign In"})},"signin-link")]})),Jt=function(){var t=Object(i.useState)(null),e=Object(s.a)(t,2),n=e[0],r=e[1];return Object(i.useEffect)((function(){return j().onAuthStateChanged((function(t){r(t||null)}))}),[]),Object(i.useEffect)((function(){n?U.push("/"):U.push("/signin")}),[n]),Object(a.jsx)(u.a,{store:M,children:Object(a.jsx)(l.c,{history:U,children:Object(a.jsxs)(l.d,{children:[Object(a.jsx)(l.b,{path:"/signin",children:Object(a.jsx)(Mt,{})}),Object(a.jsx)(l.b,{path:"/signup",children:Object(a.jsx)(Ht,{})}),Object(a.jsx)(l.b,{path:"/",children:Object(a.jsx)(Pt,{user:n})})]})})})},qt=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,308)).then((function(e){var n=e.getCLS,a=e.getFID,i=e.getFCP,r=e.getLCP,c=e.getTTFB;n(t),a(t),i(t),r(t),c(t)}))};o.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(Jt,{})}),document.getElementById("root")),qt()}},[[305,1,2]]]);
//# sourceMappingURL=main.dc3d8dda.chunk.js.map